# Cboard Backend Environment Configuration
# 
# IMPORTANT: DO NOT commit actual values to git!
# Set these variables via:
#   - Docker environment (-e flag)
#   - Kubernetes secrets
#   - Server environment variables
#   - Secret management system (Vault, AWS Secrets Manager, etc.)
#
# For development: Create .env file (add to .gitignore)
# For production: Use secure environment variable injection

# ============================================================================
# DATABASE CONFIGURATION (CRITICAL - PRODUCTION MUST USE SEPARATE SERVER)
# ============================================================================
# PRODUCTION: Must point to dedicated database server (NOT localhost)
# LOCAL/DEV: Can use localhost or docker-compose database
DB_HOST=localhost                    # CHANGE: Use separate db server in production
DB_PORT=3306                         # Standard MySQL port
DB_NAME=cboard                       # Database name (must exist)
DB_USER=root                         # CHANGE: Use restricted user in production (NOT root)
DB_PASS=                             # CHANGE: Set strong password (20+ chars, random)

# ============================================================================
# APPLICATION CONFIGURATION (CRITICAL - PRODUCTION MUST DISABLE DEBUG)
# ============================================================================
# LOCAL/DEV: Use 'local' and true for development ease
# PRODUCTION: MUST be 'production' and false (hides errors from users)
APP_ENV=local                        # CHANGE to 'production' for production
APP_DEBUG=true                       # CHANGE to 'false' for production
APP_TIMEZONE=Asia/Hong_Kong          # Timezone for date functions (adjust as needed)

# ============================================================================
# JWT AUTHENTICATION (CRITICAL - PRODUCTION MUST USE RANDOM SECRET)
# ============================================================================
# Tokens signed with this secret - must be unique, strong, and random
# PRODUCTION: Generate with: openssl rand -base64 32
# Never commit actual secret to git - must be injected at runtime
JWT_SECRET=your-secret-key-change-in-production-use-random-string

# ============================================================================
# API CONFIGURATION
# ============================================================================
# Frontend needs to know where the API is located
# LOCAL/DEV: http://localhost:3000/api or http://localhost/api
# PRODUCTION: https://aac.uplifor.org/api (MUST be HTTPS)
API_BASE_URL=http://localhost/api    # CHANGE to production HTTPS URL

# ============================================================================
# FILE UPLOAD CONFIGURATION
# ============================================================================
# Where uploaded files are stored (relative to app root)
# PRODUCTION: Ensure directory exists with correct permissions (www-data:www-data)
UPLOAD_DIR=uploads                   # Directory for user uploads
MAX_UPLOAD_SIZE=10485760             # 10 MB in bytes (adjust as needed)

# ============================================================================
# OPENCC API CONFIGURATION (Optional - Chinese character conversion)
# ============================================================================
# For converting between Simplified and Traditional Chinese
# Can be localhost (self-hosted) or external service
OPENCC_API_URL=http://localhost:8080/api/convert

# ============================================================================
# OCR CONFIGURATION (Photocen AI - For image text extraction)
# ============================================================================
# Photocen provides OCR for extracting text from images
# Works with Chinese/Cantonese (Jyutping) support
PHOTOCEN_OCR_ENABLED=true            # Set to false to disable OCR
PHOTOCEN_API_URL=https://ai.photocen.com/api  # External API endpoint
OCR_TIMEOUT=120                      # Seconds (timeout for OCR requests)

# ============================================================================
# OPTIONAL: CORS ORIGINS (For frontend domain whitelisting)
# ============================================================================
# Note: Also configured in backend/config/config.php
# LOCAL/DEV: http://localhost:3000, http://localhost:3001
# PRODUCTION: https://aac.uplifor.org (remove all dev domains)
# CORS_ORIGINS=https://aac.uplifor.org

# ============================================================================
# SECURITY REMINDERS FOR PRODUCTION DEPLOYMENT
# ============================================================================
# 
# âœ… Checklist before deploying to production:
# 
# [ ] Generate new JWT_SECRET: openssl rand -base64 32
# [ ] Set APP_ENV=production (not 'local' or 'development')
# [ ] Set APP_DEBUG=false (never expose error details)
# [ ] Use dedicated MySQL server (not localhost)
# [ ] Use non-root database user with restricted privileges
# [ ] Use strong database password (20+ chars, alphanumeric + special)
# [ ] Set API_BASE_URL to production HTTPS URL
# [ ] Remove all dev/test domains from CORS whitelist
# [ ] Ensure uploads/ directory exists with www-data:www-data ownership
# [ ] Set all variables via environment, NOT .env file in production
# [ ] Never commit .env with actual values to git
# [ ] Use secret management system for sensitive values
# [ ] Rotate JWT_SECRET periodically
# [ ] Monitor logs for unauthorized access attempts
# 
# ============================================================================
